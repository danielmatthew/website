---
const currentPath = Astro.url.pathname;

function daysUntil(futureDate) {
  // Convert input to Date if string provided
  const targetDate = new Date(futureDate);
  const today = new Date();

  // Validate future date
  if (targetDate < today) {
    throw new Error('Please provide a future date');
  }

  // Calculate difference in milliseconds
  const diffInMs = targetDate - today;

  // Convert to days and round down
  const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24));

  return diffInDays;
}

// Usage example:
// const christmas = daysUntil('2024-12-25');
// const newYears = daysUntil(new Date(2025, 0, 1));
const EAA = daysUntil('2025-06-28');
---

<a href="#main" class="skip-link visually-hidden-focusable">Skip to content</a>
{ EAA ? (
  <small class="announcement">
    Only {EAA} days until the <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=uriserv:OJ.L_.2019.151.01.0070.01.ENG">European Accessiblity Act</a> comes into force. Are you and your organisation ready? Schedule a <a href="https://calendly.com/a11y-hours/office-hours" rel="me"> free introductory call</a> to find out more.
  </small>
) : ''}
<header class="banner">

  <div>
    <a href="/" class="logo">Dan Matthew</a>
  </div>

  <nav>
    {
      currentPath === "/work" ? (
        <a href="/work" aria-current="page">
          Work
        </a>
      ) : (
        <a href="/work">Work</a>
      )
    }

    {
      currentPath === "/articles" ? (
        <a href="/articles" aria-current="page">
          Articles
        </a>
      ) : (
        <a href="/articles">Articles</a>
      )
    }

    {
      currentPath === "/notes" ? (
        <a href="/notes" aria-current="page">
          Notes
        </a>
      ) : (
        <a href="/notes">Notes</a>
      )
    }
  </nav>
</header>
<style>
  .announcement {
    display: block;
    padding-block: var(--space-s);
    border-block-end: 1px solid var(--border);
    margin-block-end: var(--space-s);
    font-size: var(--step--1);
    font-weight: 600;
  }
</style>
